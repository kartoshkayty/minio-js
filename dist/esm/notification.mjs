/*
 * MinIO Javascript Library for Amazon S3 Compatible Cloud Storage, (C) 2016 MinIO, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import { EventEmitter } from 'eventemitter3';
import jsonLineParser from 'stream-json/jsonl/Parser.js';
import { DEFAULT_REGION } from "./helpers.mjs";
import { pipesetup, uriEscape } from "./internal/helper.mjs";

// TODO: type this

// Base class for three supported configs.
export class TargetConfig {
  setId(id) {
    this.Id = id;
  }
  addEvent(newevent) {
    if (!this.Event) {
      this.Event = [];
    }
    this.Event.push(newevent);
  }
  addFilterSuffix(suffix) {
    if (!this.Filter) {
      this.Filter = {
        S3Key: {
          FilterRule: []
        }
      };
    }
    this.Filter.S3Key.FilterRule.push({
      Name: 'suffix',
      Value: suffix
    });
  }
  addFilterPrefix(prefix) {
    if (!this.Filter) {
      this.Filter = {
        S3Key: {
          FilterRule: []
        }
      };
    }
    this.Filter.S3Key.FilterRule.push({
      Name: 'prefix',
      Value: prefix
    });
  }
}

// 1. Topic (simple notification service)
export class TopicConfig extends TargetConfig {
  constructor(arn) {
    super();
    this.Topic = arn;
  }
}

// 2. Queue (simple queue service)
export class QueueConfig extends TargetConfig {
  constructor(arn) {
    super();
    this.Queue = arn;
  }
}

// 3. CloudFront (lambda function)
export class CloudFunctionConfig extends TargetConfig {
  constructor(arn) {
    super();
    this.CloudFunction = arn;
  }
}

// Notification config - array of target configs.
// Target configs can be
// 1. Topic (simple notification service)
// 2. Queue (simple queue service)
// 3. CloudFront (lambda function)
export class NotificationConfig {
  add(target) {
    let instance;
    if (target instanceof TopicConfig) {
      instance = this.TopicConfiguration ?? (this.TopicConfiguration = []);
    }
    if (target instanceof QueueConfig) {
      instance = this.QueueConfiguration ?? (this.QueueConfiguration = []);
    }
    if (target instanceof CloudFunctionConfig) {
      instance = this.CloudFunctionConfiguration ?? (this.CloudFunctionConfiguration = []);
    }
    if (instance) {
      instance.push(target);
    }
  }
}
export const buildARN = (partition, service, region, accountId, resource) => {
  return 'arn:' + partition + ':' + service + ':' + region + ':' + accountId + ':' + resource;
};
export const ObjectCreatedAll = 's3:ObjectCreated:*';
export const ObjectCreatedPut = 's3:ObjectCreated:Put';
export const ObjectCreatedPost = 's3:ObjectCreated:Post';
export const ObjectCreatedCopy = 's3:ObjectCreated:Copy';
export const ObjectCreatedCompleteMultipartUpload = 's3:ObjectCreated:CompleteMultipartUpload';
export const ObjectRemovedAll = 's3:ObjectRemoved:*';
export const ObjectRemovedDelete = 's3:ObjectRemoved:Delete';
export const ObjectRemovedDeleteMarkerCreated = 's3:ObjectRemoved:DeleteMarkerCreated';
export const ObjectReducedRedundancyLostObject = 's3:ReducedRedundancyLostObject';

// put string at least so auto-complete could work

// TODO: type this

// Poll for notifications, used in #listenBucketNotification.
// Listening constitutes repeatedly requesting s3 whether or not any
// changes have occurred.
export class NotificationPoller extends EventEmitter {
  constructor(client, bucketName, prefix, suffix, events) {
    super();
    this.client = client;
    this.bucketName = bucketName;
    this.prefix = prefix;
    this.suffix = suffix;
    this.events = events;
    this.ending = false;
  }

  // Starts the polling.
  start() {
    this.ending = false;
    process.nextTick(() => {
      this.checkForChanges();
    });
  }

  // Stops the polling.
  stop() {
    this.ending = true;
  }
  checkForChanges() {
    // Don't continue if we're looping again but are cancelled.
    if (this.ending) {
      return;
    }
    const method = 'GET';
    const queries = [];
    if (this.prefix) {
      const prefix = uriEscape(this.prefix);
      queries.push(`prefix=${prefix}`);
    }
    if (this.suffix) {
      const suffix = uriEscape(this.suffix);
      queries.push(`suffix=${suffix}`);
    }
    if (this.events) {
      this.events.forEach(s3event => queries.push('events=' + uriEscape(s3event)));
    }
    queries.sort();
    let query = '';
    if (queries.length > 0) {
      query = `${queries.join('&')}`;
    }
    const region = this.client.region || DEFAULT_REGION;
    this.client.makeRequestAsync({
      method,
      bucketName: this.bucketName,
      query
    }, '', [200], region).then(response => {
      const asm = jsonLineParser.make();
      pipesetup(response, asm).on('data', data => {
        // Data is flushed periodically (every 5 seconds), so we should
        // handle it after flushing from the JSON parser.
        let records = data.value.Records;
        // If null (= no records), change to an empty array.
        if (!records) {
          records = [];
        }

        // Iterate over the notifications and emit them individually.
        records.forEach(record => {
          this.emit('notification', record);
        });

        // If we're done, stop.
        if (this.ending) {
          response === null || response === void 0 || response.destroy();
        }
      }).on('error', e => this.emit('error', e)).on('end', () => {
        // Do it again, if we haven't cancelled yet.
        process.nextTick(() => {
          this.checkForChanges();
        });
      });
    }, e => {
      return this.emit('error', e);
    });
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFdmVudEVtaXR0ZXIiLCJqc29uTGluZVBhcnNlciIsIkRFRkFVTFRfUkVHSU9OIiwicGlwZXNldHVwIiwidXJpRXNjYXBlIiwiVGFyZ2V0Q29uZmlnIiwic2V0SWQiLCJpZCIsIklkIiwiYWRkRXZlbnQiLCJuZXdldmVudCIsIkV2ZW50IiwicHVzaCIsImFkZEZpbHRlclN1ZmZpeCIsInN1ZmZpeCIsIkZpbHRlciIsIlMzS2V5IiwiRmlsdGVyUnVsZSIsIk5hbWUiLCJWYWx1ZSIsImFkZEZpbHRlclByZWZpeCIsInByZWZpeCIsIlRvcGljQ29uZmlnIiwiY29uc3RydWN0b3IiLCJhcm4iLCJUb3BpYyIsIlF1ZXVlQ29uZmlnIiwiUXVldWUiLCJDbG91ZEZ1bmN0aW9uQ29uZmlnIiwiQ2xvdWRGdW5jdGlvbiIsIk5vdGlmaWNhdGlvbkNvbmZpZyIsImFkZCIsInRhcmdldCIsImluc3RhbmNlIiwiVG9waWNDb25maWd1cmF0aW9uIiwiUXVldWVDb25maWd1cmF0aW9uIiwiQ2xvdWRGdW5jdGlvbkNvbmZpZ3VyYXRpb24iLCJidWlsZEFSTiIsInBhcnRpdGlvbiIsInNlcnZpY2UiLCJyZWdpb24iLCJhY2NvdW50SWQiLCJyZXNvdXJjZSIsIk9iamVjdENyZWF0ZWRBbGwiLCJPYmplY3RDcmVhdGVkUHV0IiwiT2JqZWN0Q3JlYXRlZFBvc3QiLCJPYmplY3RDcmVhdGVkQ29weSIsIk9iamVjdENyZWF0ZWRDb21wbGV0ZU11bHRpcGFydFVwbG9hZCIsIk9iamVjdFJlbW92ZWRBbGwiLCJPYmplY3RSZW1vdmVkRGVsZXRlIiwiT2JqZWN0UmVtb3ZlZERlbGV0ZU1hcmtlckNyZWF0ZWQiLCJPYmplY3RSZWR1Y2VkUmVkdW5kYW5jeUxvc3RPYmplY3QiLCJOb3RpZmljYXRpb25Qb2xsZXIiLCJjbGllbnQiLCJidWNrZXROYW1lIiwiZXZlbnRzIiwiZW5kaW5nIiwic3RhcnQiLCJwcm9jZXNzIiwibmV4dFRpY2siLCJjaGVja0ZvckNoYW5nZXMiLCJzdG9wIiwibWV0aG9kIiwicXVlcmllcyIsImZvckVhY2giLCJzM2V2ZW50Iiwic29ydCIsInF1ZXJ5IiwibGVuZ3RoIiwiam9pbiIsIm1ha2VSZXF1ZXN0QXN5bmMiLCJ0aGVuIiwicmVzcG9uc2UiLCJhc20iLCJtYWtlIiwib24iLCJkYXRhIiwicmVjb3JkcyIsInZhbHVlIiwiUmVjb3JkcyIsInJlY29yZCIsImVtaXQiLCJkZXN0cm95IiwiZSJdLCJzb3VyY2VzIjpbIm5vdGlmaWNhdGlvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG4gKiBNaW5JTyBKYXZhc2NyaXB0IExpYnJhcnkgZm9yIEFtYXpvbiBTMyBDb21wYXRpYmxlIENsb3VkIFN0b3JhZ2UsIChDKSAyMDE2IE1pbklPLCBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuXHJcbmltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gJ2V2ZW50ZW1pdHRlcjMnXHJcbmltcG9ydCBqc29uTGluZVBhcnNlciBmcm9tICdzdHJlYW0tanNvbi9qc29ubC9QYXJzZXIuanMnXHJcblxyXG5pbXBvcnQgeyBERUZBVUxUX1JFR0lPTiB9IGZyb20gJy4vaGVscGVycy50cydcclxuaW1wb3J0IHR5cGUgeyBUeXBlZENsaWVudCB9IGZyb20gJy4vaW50ZXJuYWwvY2xpZW50LnRzJ1xyXG5pbXBvcnQgeyBwaXBlc2V0dXAsIHVyaUVzY2FwZSB9IGZyb20gJy4vaW50ZXJuYWwvaGVscGVyLnRzJ1xyXG5cclxuLy8gVE9ETzogdHlwZSB0aGlzXHJcblxyXG50eXBlIEV2ZW50ID0gdW5rbm93blxyXG5cclxuLy8gQmFzZSBjbGFzcyBmb3IgdGhyZWUgc3VwcG9ydGVkIGNvbmZpZ3MuXHJcbmV4cG9ydCBjbGFzcyBUYXJnZXRDb25maWcge1xyXG4gIHByaXZhdGUgRmlsdGVyPzogeyBTM0tleTogeyBGaWx0ZXJSdWxlOiB7IE5hbWU6IHN0cmluZzsgVmFsdWU6IHN0cmluZyB9W10gfSB9XHJcbiAgcHJpdmF0ZSBFdmVudD86IEV2ZW50W11cclxuICBwcml2YXRlIElkOiB1bmtub3duXHJcblxyXG4gIHNldElkKGlkOiB1bmtub3duKSB7XHJcbiAgICB0aGlzLklkID0gaWRcclxuICB9XHJcblxyXG4gIGFkZEV2ZW50KG5ld2V2ZW50OiBFdmVudCkge1xyXG4gICAgaWYgKCF0aGlzLkV2ZW50KSB7XHJcbiAgICAgIHRoaXMuRXZlbnQgPSBbXVxyXG4gICAgfVxyXG4gICAgdGhpcy5FdmVudC5wdXNoKG5ld2V2ZW50KVxyXG4gIH1cclxuXHJcbiAgYWRkRmlsdGVyU3VmZml4KHN1ZmZpeDogc3RyaW5nKSB7XHJcbiAgICBpZiAoIXRoaXMuRmlsdGVyKSB7XHJcbiAgICAgIHRoaXMuRmlsdGVyID0geyBTM0tleTogeyBGaWx0ZXJSdWxlOiBbXSB9IH1cclxuICAgIH1cclxuICAgIHRoaXMuRmlsdGVyLlMzS2V5LkZpbHRlclJ1bGUucHVzaCh7IE5hbWU6ICdzdWZmaXgnLCBWYWx1ZTogc3VmZml4IH0pXHJcbiAgfVxyXG5cclxuICBhZGRGaWx0ZXJQcmVmaXgocHJlZml4OiBzdHJpbmcpIHtcclxuICAgIGlmICghdGhpcy5GaWx0ZXIpIHtcclxuICAgICAgdGhpcy5GaWx0ZXIgPSB7IFMzS2V5OiB7IEZpbHRlclJ1bGU6IFtdIH0gfVxyXG4gICAgfVxyXG4gICAgdGhpcy5GaWx0ZXIuUzNLZXkuRmlsdGVyUnVsZS5wdXNoKHsgTmFtZTogJ3ByZWZpeCcsIFZhbHVlOiBwcmVmaXggfSlcclxuICB9XHJcbn1cclxuXHJcbi8vIDEuIFRvcGljIChzaW1wbGUgbm90aWZpY2F0aW9uIHNlcnZpY2UpXHJcbmV4cG9ydCBjbGFzcyBUb3BpY0NvbmZpZyBleHRlbmRzIFRhcmdldENvbmZpZyB7XHJcbiAgcHJpdmF0ZSBUb3BpYzogc3RyaW5nXHJcblxyXG4gIGNvbnN0cnVjdG9yKGFybjogc3RyaW5nKSB7XHJcbiAgICBzdXBlcigpXHJcbiAgICB0aGlzLlRvcGljID0gYXJuXHJcbiAgfVxyXG59XHJcblxyXG4vLyAyLiBRdWV1ZSAoc2ltcGxlIHF1ZXVlIHNlcnZpY2UpXHJcbmV4cG9ydCBjbGFzcyBRdWV1ZUNvbmZpZyBleHRlbmRzIFRhcmdldENvbmZpZyB7XHJcbiAgcHJpdmF0ZSBRdWV1ZTogc3RyaW5nXHJcblxyXG4gIGNvbnN0cnVjdG9yKGFybjogc3RyaW5nKSB7XHJcbiAgICBzdXBlcigpXHJcbiAgICB0aGlzLlF1ZXVlID0gYXJuXHJcbiAgfVxyXG59XHJcblxyXG4vLyAzLiBDbG91ZEZyb250IChsYW1iZGEgZnVuY3Rpb24pXHJcbmV4cG9ydCBjbGFzcyBDbG91ZEZ1bmN0aW9uQ29uZmlnIGV4dGVuZHMgVGFyZ2V0Q29uZmlnIHtcclxuICBwcml2YXRlIENsb3VkRnVuY3Rpb246IHN0cmluZ1xyXG5cclxuICBjb25zdHJ1Y3Rvcihhcm46IHN0cmluZykge1xyXG4gICAgc3VwZXIoKVxyXG4gICAgdGhpcy5DbG91ZEZ1bmN0aW9uID0gYXJuXHJcbiAgfVxyXG59XHJcblxyXG4vLyBOb3RpZmljYXRpb24gY29uZmlnIC0gYXJyYXkgb2YgdGFyZ2V0IGNvbmZpZ3MuXHJcbi8vIFRhcmdldCBjb25maWdzIGNhbiBiZVxyXG4vLyAxLiBUb3BpYyAoc2ltcGxlIG5vdGlmaWNhdGlvbiBzZXJ2aWNlKVxyXG4vLyAyLiBRdWV1ZSAoc2ltcGxlIHF1ZXVlIHNlcnZpY2UpXHJcbi8vIDMuIENsb3VkRnJvbnQgKGxhbWJkYSBmdW5jdGlvbilcclxuZXhwb3J0IGNsYXNzIE5vdGlmaWNhdGlvbkNvbmZpZyB7XHJcbiAgcHJpdmF0ZSBUb3BpY0NvbmZpZ3VyYXRpb24/OiBUYXJnZXRDb25maWdbXVxyXG4gIHByaXZhdGUgQ2xvdWRGdW5jdGlvbkNvbmZpZ3VyYXRpb24/OiBUYXJnZXRDb25maWdbXVxyXG4gIHByaXZhdGUgUXVldWVDb25maWd1cmF0aW9uPzogVGFyZ2V0Q29uZmlnW11cclxuXHJcbiAgYWRkKHRhcmdldDogVGFyZ2V0Q29uZmlnKSB7XHJcbiAgICBsZXQgaW5zdGFuY2U6IFRhcmdldENvbmZpZ1tdIHwgdW5kZWZpbmVkXHJcbiAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgVG9waWNDb25maWcpIHtcclxuICAgICAgaW5zdGFuY2UgPSB0aGlzLlRvcGljQ29uZmlndXJhdGlvbiA/Pz0gW11cclxuICAgIH1cclxuICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBRdWV1ZUNvbmZpZykge1xyXG4gICAgICBpbnN0YW5jZSA9IHRoaXMuUXVldWVDb25maWd1cmF0aW9uID8/PSBbXVxyXG4gICAgfVxyXG4gICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIENsb3VkRnVuY3Rpb25Db25maWcpIHtcclxuICAgICAgaW5zdGFuY2UgPSB0aGlzLkNsb3VkRnVuY3Rpb25Db25maWd1cmF0aW9uID8/PSBbXVxyXG4gICAgfVxyXG4gICAgaWYgKGluc3RhbmNlKSB7XHJcbiAgICAgIGluc3RhbmNlLnB1c2godGFyZ2V0KVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGJ1aWxkQVJOID0gKHBhcnRpdGlvbjogc3RyaW5nLCBzZXJ2aWNlOiBzdHJpbmcsIHJlZ2lvbjogc3RyaW5nLCBhY2NvdW50SWQ6IHN0cmluZywgcmVzb3VyY2U6IHN0cmluZykgPT4ge1xyXG4gIHJldHVybiAnYXJuOicgKyBwYXJ0aXRpb24gKyAnOicgKyBzZXJ2aWNlICsgJzonICsgcmVnaW9uICsgJzonICsgYWNjb3VudElkICsgJzonICsgcmVzb3VyY2VcclxufVxyXG5leHBvcnQgY29uc3QgT2JqZWN0Q3JlYXRlZEFsbCA9ICdzMzpPYmplY3RDcmVhdGVkOionXHJcbmV4cG9ydCBjb25zdCBPYmplY3RDcmVhdGVkUHV0ID0gJ3MzOk9iamVjdENyZWF0ZWQ6UHV0J1xyXG5leHBvcnQgY29uc3QgT2JqZWN0Q3JlYXRlZFBvc3QgPSAnczM6T2JqZWN0Q3JlYXRlZDpQb3N0J1xyXG5leHBvcnQgY29uc3QgT2JqZWN0Q3JlYXRlZENvcHkgPSAnczM6T2JqZWN0Q3JlYXRlZDpDb3B5J1xyXG5leHBvcnQgY29uc3QgT2JqZWN0Q3JlYXRlZENvbXBsZXRlTXVsdGlwYXJ0VXBsb2FkID0gJ3MzOk9iamVjdENyZWF0ZWQ6Q29tcGxldGVNdWx0aXBhcnRVcGxvYWQnXHJcbmV4cG9ydCBjb25zdCBPYmplY3RSZW1vdmVkQWxsID0gJ3MzOk9iamVjdFJlbW92ZWQ6KidcclxuZXhwb3J0IGNvbnN0IE9iamVjdFJlbW92ZWREZWxldGUgPSAnczM6T2JqZWN0UmVtb3ZlZDpEZWxldGUnXHJcbmV4cG9ydCBjb25zdCBPYmplY3RSZW1vdmVkRGVsZXRlTWFya2VyQ3JlYXRlZCA9ICdzMzpPYmplY3RSZW1vdmVkOkRlbGV0ZU1hcmtlckNyZWF0ZWQnXHJcbmV4cG9ydCBjb25zdCBPYmplY3RSZWR1Y2VkUmVkdW5kYW5jeUxvc3RPYmplY3QgPSAnczM6UmVkdWNlZFJlZHVuZGFuY3lMb3N0T2JqZWN0J1xyXG5leHBvcnQgdHlwZSBOb3RpZmljYXRpb25FdmVudCA9XHJcbiAgfCAnczM6T2JqZWN0Q3JlYXRlZDoqJ1xyXG4gIHwgJ3MzOk9iamVjdENyZWF0ZWQ6UHV0J1xyXG4gIHwgJ3MzOk9iamVjdENyZWF0ZWQ6UG9zdCdcclxuICB8ICdzMzpPYmplY3RDcmVhdGVkOkNvcHknXHJcbiAgfCAnczM6T2JqZWN0Q3JlYXRlZDpDb21wbGV0ZU11bHRpcGFydFVwbG9hZCdcclxuICB8ICdzMzpPYmplY3RSZW1vdmVkOionXHJcbiAgfCAnczM6T2JqZWN0UmVtb3ZlZDpEZWxldGUnXHJcbiAgfCAnczM6T2JqZWN0UmVtb3ZlZDpEZWxldGVNYXJrZXJDcmVhdGVkJ1xyXG4gIHwgJ3MzOlJlZHVjZWRSZWR1bmRhbmN5TG9zdE9iamVjdCdcclxuICB8ICdzMzpUZXN0RXZlbnQnXHJcbiAgfCAnczM6T2JqZWN0UmVzdG9yZTpQb3N0J1xyXG4gIHwgJ3MzOk9iamVjdFJlc3RvcmU6Q29tcGxldGVkJ1xyXG4gIHwgJ3MzOlJlcGxpY2F0aW9uOk9wZXJhdGlvbkZhaWxlZFJlcGxpY2F0aW9uJ1xyXG4gIHwgJ3MzOlJlcGxpY2F0aW9uOk9wZXJhdGlvbk1pc3NlZFRocmVzaG9sZCdcclxuICB8ICdzMzpSZXBsaWNhdGlvbjpPcGVyYXRpb25SZXBsaWNhdGVkQWZ0ZXJUaHJlc2hvbGQnXHJcbiAgfCAnczM6UmVwbGljYXRpb246T3BlcmF0aW9uTm90VHJhY2tlZCdcclxuICB8IHN0cmluZyAvLyBwdXQgc3RyaW5nIGF0IGxlYXN0IHNvIGF1dG8tY29tcGxldGUgY291bGQgd29ya1xyXG5cclxuLy8gVE9ETzogdHlwZSB0aGlzXHJcbmV4cG9ydCB0eXBlIE5vdGlmaWNhdGlvblJlY29yZCA9IHVua25vd25cclxuLy8gUG9sbCBmb3Igbm90aWZpY2F0aW9ucywgdXNlZCBpbiAjbGlzdGVuQnVja2V0Tm90aWZpY2F0aW9uLlxyXG4vLyBMaXN0ZW5pbmcgY29uc3RpdHV0ZXMgcmVwZWF0ZWRseSByZXF1ZXN0aW5nIHMzIHdoZXRoZXIgb3Igbm90IGFueVxyXG4vLyBjaGFuZ2VzIGhhdmUgb2NjdXJyZWQuXHJcbmV4cG9ydCBjbGFzcyBOb3RpZmljYXRpb25Qb2xsZXIgZXh0ZW5kcyBFdmVudEVtaXR0ZXI8e1xyXG4gIG5vdGlmaWNhdGlvbjogKGV2ZW50OiBOb3RpZmljYXRpb25SZWNvcmQpID0+IHZvaWRcclxuICBlcnJvcjogKGVycm9yOiB1bmtub3duKSA9PiB2b2lkXHJcbn0+IHtcclxuICBwcml2YXRlIGNsaWVudDogVHlwZWRDbGllbnRcclxuICBwcml2YXRlIGJ1Y2tldE5hbWU6IHN0cmluZ1xyXG4gIHByaXZhdGUgcHJlZml4OiBzdHJpbmdcclxuICBwcml2YXRlIHN1ZmZpeDogc3RyaW5nXHJcbiAgcHJpdmF0ZSBldmVudHM6IE5vdGlmaWNhdGlvbkV2ZW50W11cclxuICBwcml2YXRlIGVuZGluZzogYm9vbGVhblxyXG5cclxuICBjb25zdHJ1Y3RvcihjbGllbnQ6IFR5cGVkQ2xpZW50LCBidWNrZXROYW1lOiBzdHJpbmcsIHByZWZpeDogc3RyaW5nLCBzdWZmaXg6IHN0cmluZywgZXZlbnRzOiBOb3RpZmljYXRpb25FdmVudFtdKSB7XHJcbiAgICBzdXBlcigpXHJcblxyXG4gICAgdGhpcy5jbGllbnQgPSBjbGllbnRcclxuICAgIHRoaXMuYnVja2V0TmFtZSA9IGJ1Y2tldE5hbWVcclxuICAgIHRoaXMucHJlZml4ID0gcHJlZml4XHJcbiAgICB0aGlzLnN1ZmZpeCA9IHN1ZmZpeFxyXG4gICAgdGhpcy5ldmVudHMgPSBldmVudHNcclxuXHJcbiAgICB0aGlzLmVuZGluZyA9IGZhbHNlXHJcbiAgfVxyXG5cclxuICAvLyBTdGFydHMgdGhlIHBvbGxpbmcuXHJcbiAgc3RhcnQoKSB7XHJcbiAgICB0aGlzLmVuZGluZyA9IGZhbHNlXHJcblxyXG4gICAgcHJvY2Vzcy5uZXh0VGljaygoKSA9PiB7XHJcbiAgICAgIHRoaXMuY2hlY2tGb3JDaGFuZ2VzKClcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICAvLyBTdG9wcyB0aGUgcG9sbGluZy5cclxuICBzdG9wKCkge1xyXG4gICAgdGhpcy5lbmRpbmcgPSB0cnVlXHJcbiAgfVxyXG5cclxuICBjaGVja0ZvckNoYW5nZXMoKSB7XHJcbiAgICAvLyBEb24ndCBjb250aW51ZSBpZiB3ZSdyZSBsb29waW5nIGFnYWluIGJ1dCBhcmUgY2FuY2VsbGVkLlxyXG4gICAgaWYgKHRoaXMuZW5kaW5nKSB7XHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG1ldGhvZCA9ICdHRVQnXHJcbiAgICBjb25zdCBxdWVyaWVzID0gW11cclxuICAgIGlmICh0aGlzLnByZWZpeCkge1xyXG4gICAgICBjb25zdCBwcmVmaXggPSB1cmlFc2NhcGUodGhpcy5wcmVmaXgpXHJcbiAgICAgIHF1ZXJpZXMucHVzaChgcHJlZml4PSR7cHJlZml4fWApXHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5zdWZmaXgpIHtcclxuICAgICAgY29uc3Qgc3VmZml4ID0gdXJpRXNjYXBlKHRoaXMuc3VmZml4KVxyXG4gICAgICBxdWVyaWVzLnB1c2goYHN1ZmZpeD0ke3N1ZmZpeH1gKVxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuZXZlbnRzKSB7XHJcbiAgICAgIHRoaXMuZXZlbnRzLmZvckVhY2goKHMzZXZlbnQpID0+IHF1ZXJpZXMucHVzaCgnZXZlbnRzPScgKyB1cmlFc2NhcGUoczNldmVudCkpKVxyXG4gICAgfVxyXG4gICAgcXVlcmllcy5zb3J0KClcclxuXHJcbiAgICBsZXQgcXVlcnkgPSAnJ1xyXG4gICAgaWYgKHF1ZXJpZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICBxdWVyeSA9IGAke3F1ZXJpZXMuam9pbignJicpfWBcclxuICAgIH1cclxuICAgIGNvbnN0IHJlZ2lvbiA9IHRoaXMuY2xpZW50LnJlZ2lvbiB8fCBERUZBVUxUX1JFR0lPTlxyXG5cclxuICAgIHRoaXMuY2xpZW50Lm1ha2VSZXF1ZXN0QXN5bmMoeyBtZXRob2QsIGJ1Y2tldE5hbWU6IHRoaXMuYnVja2V0TmFtZSwgcXVlcnkgfSwgJycsIFsyMDBdLCByZWdpb24pLnRoZW4oXHJcbiAgICAgIChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGFzbSA9IGpzb25MaW5lUGFyc2VyLm1ha2UoKVxyXG5cclxuICAgICAgICBwaXBlc2V0dXAocmVzcG9uc2UsIGFzbSlcclxuICAgICAgICAgIC5vbignZGF0YScsIChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIERhdGEgaXMgZmx1c2hlZCBwZXJpb2RpY2FsbHkgKGV2ZXJ5IDUgc2Vjb25kcyksIHNvIHdlIHNob3VsZFxyXG4gICAgICAgICAgICAvLyBoYW5kbGUgaXQgYWZ0ZXIgZmx1c2hpbmcgZnJvbSB0aGUgSlNPTiBwYXJzZXIuXHJcbiAgICAgICAgICAgIGxldCByZWNvcmRzID0gZGF0YS52YWx1ZS5SZWNvcmRzXHJcbiAgICAgICAgICAgIC8vIElmIG51bGwgKD0gbm8gcmVjb3JkcyksIGNoYW5nZSB0byBhbiBlbXB0eSBhcnJheS5cclxuICAgICAgICAgICAgaWYgKCFyZWNvcmRzKSB7XHJcbiAgICAgICAgICAgICAgcmVjb3JkcyA9IFtdXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEl0ZXJhdGUgb3ZlciB0aGUgbm90aWZpY2F0aW9ucyBhbmQgZW1pdCB0aGVtIGluZGl2aWR1YWxseS5cclxuICAgICAgICAgICAgcmVjb3Jkcy5mb3JFYWNoKChyZWNvcmQ6IE5vdGlmaWNhdGlvblJlY29yZCkgPT4ge1xyXG4gICAgICAgICAgICAgIHRoaXMuZW1pdCgnbm90aWZpY2F0aW9uJywgcmVjb3JkKVxyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgLy8gSWYgd2UncmUgZG9uZSwgc3RvcC5cclxuICAgICAgICAgICAgaWYgKHRoaXMuZW5kaW5nKSB7XHJcbiAgICAgICAgICAgICAgcmVzcG9uc2U/LmRlc3Ryb3koKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLm9uKCdlcnJvcicsIChlKSA9PiB0aGlzLmVtaXQoJ2Vycm9yJywgZSkpXHJcbiAgICAgICAgICAub24oJ2VuZCcsICgpID0+IHtcclxuICAgICAgICAgICAgLy8gRG8gaXQgYWdhaW4sIGlmIHdlIGhhdmVuJ3QgY2FuY2VsbGVkIHlldC5cclxuICAgICAgICAgICAgcHJvY2Vzcy5uZXh0VGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgdGhpcy5jaGVja0ZvckNoYW5nZXMoKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgfSlcclxuICAgICAgfSxcclxuICAgICAgKGUpID0+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5lbWl0KCdlcnJvcicsIGUpXHJcbiAgICAgIH0sXHJcbiAgICApXHJcbiAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFNBQVNBLFlBQVksUUFBUSxlQUFlO0FBQzVDLE9BQU9DLGNBQWMsTUFBTSw2QkFBNkI7QUFFeEQsU0FBU0MsY0FBYyxRQUFRLGVBQWM7QUFFN0MsU0FBU0MsU0FBUyxFQUFFQyxTQUFTLFFBQVEsdUJBQXNCOztBQUUzRDs7QUFJQTtBQUNBLE9BQU8sTUFBTUMsWUFBWSxDQUFDO0VBS3hCQyxLQUFLQSxDQUFDQyxFQUFXLEVBQUU7SUFDakIsSUFBSSxDQUFDQyxFQUFFLEdBQUdELEVBQUU7RUFDZDtFQUVBRSxRQUFRQSxDQUFDQyxRQUFlLEVBQUU7SUFDeEIsSUFBSSxDQUFDLElBQUksQ0FBQ0MsS0FBSyxFQUFFO01BQ2YsSUFBSSxDQUFDQSxLQUFLLEdBQUcsRUFBRTtJQUNqQjtJQUNBLElBQUksQ0FBQ0EsS0FBSyxDQUFDQyxJQUFJLENBQUNGLFFBQVEsQ0FBQztFQUMzQjtFQUVBRyxlQUFlQSxDQUFDQyxNQUFjLEVBQUU7SUFDOUIsSUFBSSxDQUFDLElBQUksQ0FBQ0MsTUFB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